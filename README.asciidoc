What I learned from porting my projects to FreeBSD
==================================================
Shlomi Fish <shlomif@cpan.org>
:Date: 2018-10-07
:Revision: $Id$

[id="intro"]
Introduction
------------

I set up a local https://www.freebsd.org/[FreeBSD] VirtualBox VM to test
something, and it seems to work very well. Due to the novelty factor, I decided
to get my software projects to build and pass the tests there.

[id="the_projects"]
The Projects
------------

* https://web-cpan.shlomifish.org/latemp/

* https://fc-solve.shlomifish.org/

* https://www.shlomifish.org/open-source/projects/black-hole-solitaire-solver/

* https://better-scm.shlomifish.org/source/

* http://perl-begin.org/source/

* https://www.shlomifish.org/meta/site-source/

* Written using a mix of C, Perl 5, Python, Ruby, GNU Bash, XML, CMake, XSLT,
XHTML5, XHTML1.1, Website META Language, JavaScript and more.

* Work fine on several Linux distributions and have
https://en.wikipedia.org/wiki/Travis_CI using Ubuntu 14.04 hosts

* Some pass builds and tests on AppVeyor/Win64

[id="lessons"]
What I Learned:
---------------

[id="usr_local"]
Some executables on FreeBSD are in /usr/local/bin instead of /usr/bin
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

On Linux they are almost always in +/usr/bin/+

* https://github.com/shlomif/shlomif-computer-settings/blob/master/shlomif-settings/home-bin-executables/bin/fix-perl-shebang.pl[script to fix the perl shebang line]

* +/usr/bin/env+ is your friend.

[id="gmake"]
make on FreeBSD is not GNU make
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* One can call +gmake+

* No +gmake+ on Debian/Ubuntu/etc.
+
* Solution for Debian:
+
--------------
mkdir -p ~/bin
ln -sf /usr/bin/make ~/bin/gmake
export PATH="$HOME/bin:$PATH"
--------------

[id="m4"]
m4 on FreeBSD is not compatible with GNU m4
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* Fixed in https://github.com/thewml/website-meta-language/commit/97c4ce264b66c880ea0016c096fda9d3188c0f4e[this commit] by first checking for +gm4+ and
then falling back on plain +m4+.

[id="cpan_dists"]
Some CPAN Modules fail to install using local-lib there
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* No idea why.

* Sometimes +cpanm -n+ ("no test") helps.

* +pkg install -y p5-Foo-Bar+ as root for other times.
